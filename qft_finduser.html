<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>用户列表</title>
    <!--bootstrap-select  css文件-->
    <link rel="stylesheet" type="text/css" href="js/bootstrapselect/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="js/bootstrapselect/css/bootstrap-select.css"/>
    <!--主样式表-->
    <link rel="stylesheet" href="css/models.css">
    <!--[if lt IE 9]>
    <script src="js/support/html5shiv.min.js"></script>
    <script src="js/support/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="subMainContent">
    <!--子页顶部内容-->
    <div class="subTopBox">
        <div class="subTopLeft">
            <a class="subTopBtn subHover" href="javascript:void(0);">正常用户</a><a class="subTopBtn" href="javascript:void(0);">已关闭用户</a><a class="addbtn qft_adduser" href="javascript:void(0);">添加用户</a>
        </div>
    </div>
    <!--end 子页顶部内容-->
    <!--搜索条件-->
    <div class="searchTerm">
        <table class="searchTab searchWidth_one">
            <tr>
                <th>工作城市：</th>
                <td>
                    <select class="selectpicker" data-live-search="true">
                        <option value="">全部</option>
                        <option value="">重庆</option>
                        <option value="">四川</option>
                    </select>
                </td>
                <th>工作店面：</th>
                <td>
                    <select class="selectpicker" data-live-search="true" >
                        <option value="">全部</option>
                        <option value="">重庆</option>
                        <option value="">四川</option>
                    </select>
                </td>
                <th>用户姓名：</th>
                <td><input name="" type="text"></td>
                <td><input class="tabSearchBtn" name="" type="button" value="搜索"></td>
            </tr>
        </table>
    </div>
    <!--end 搜索条件-->
    <!--子页主体内容-->
    <div class="subConBox">
        <table class="wareList" id="example"></table>
    </div>
    <!--end 子页主体内容-->
</div>
<!--修改密码-->
<div class="PopupBox hide" id="qft_modifyBox">
    <h2 class="PopupTitle">个人信息</h2>
    <table class="popupList">
        <tr>
            <th class="fieldName">姓名：</th>
            <td><input name="" type="text" value="管理员"></td>
            <th class="fieldName">登录名：</th>
            <td><input name="" type="text" value="admin"></td>
        </tr>
        <tr>
            <th class="fieldName">部门：</th>
            <td><input name="" type="text" value="管理权限"></td>
            <th class="fieldName">职位：</th>
            <td><input name="" type="text" value="1001套以上"></td>
        </tr>
        <tr>
            <th class="fieldName">店面：</th>
            <td><input name="" type="text" value=""></td>
            <th class="fieldName">电话：</th>
            <td><input name="" type="text" value="13896041111"></td>
        </tr>
    </table>
    <h2 class="PopupTitle">密码修改</h2>
    <form id="roleForm" action="" method="">
        <table class="popupList">
            <tr>
                <th class="fieldName"><span class="require">*</span>新密码：</th>
                <td><input class="validate[required,custom[ennumber]]" name="password" type="password" value="" placeholder="请输入新密码"></td>
            </tr>
        </table>
    </form>
</div>
<!--end 修改密码-->
<!--用户信息-->
<div class="PopupBox hide" id="qft_userInfoBox">
    <table class="detailList">
        <tr>
            <th class="fieldName_one">真实姓名：</th>
            <td>李四</td>
            <th class="fieldName_one">联系方式：</th>
            <td>15456565656</td>
        </tr>
        <tr>
            <th class="fieldName_one">登陆账号：</th>
            <td>hexiaomm</td>
            <th class="fieldName_one">密码：</th>
            <td>******</td>
        </tr>
        <tr>
            <th class="fieldName_one">工作店面：</th>
            <td>123</td>
            <th class="fieldName_one">状态：</th>
            <td><span class="blue-col">在职</span></td>
        </tr>
        <tr>
            <th class="fieldName_one">上次登陆IP：</th>
            <td>119.85.112.61</td>
            <th class="fieldName_one">登陆错误次数：</th>
            <td>0</td>
        </tr>
        <tr>
            <th class="fieldName_one">创建时间：</th>
            <td>2015-10-09 13:15:17</td>
            <th class="fieldName_one">系统锁定：</th>
            <td>3天未登陆</td>
        </tr>
        <tr>
            <th class="fieldName_one">可看房源店面：</th>
            <td colspan="3">
                <textarea class="detailArea disabled" disabled="disabled">南坪店,123</textarea>
            </td>
        </tr>
    </table>
</div>
<!--end 用户信息-->
<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<!--dataTable-->
<script type="text/javascript" src="js/datatables/jquery.dataTables.js"></script>
<!--bootstrap-select-->
<script type="text/javascript" src="js/bootstrapselect/bootstrap.min.js"></script>
<script type="text/javascript" src="js/bootstrapselect/bootstrap-select.js"></script>
<script type="text/javascript" src="js/bootstrapselect/select.js"></script>
<!--layer弹出层-->
<script type="text/javascript" src="js/layer/layer.js"></script>
<!--表单验证-->
<script type="text/javascript" src="js/validate/jquery.validationEngine-zh_CN.js"></script>
<script type="text/javascript" src="js/validate/jquery.validationEngine.js"></script>
<script>
    $(function(){
        //查看用户详情
        $('.wareList').on('dblclick', 'tbody tr', function(){
            layer.open({
                type: 1,
                title: '用户信息',
                skin: 'popup-title-bg', //样式类名
                closeBtn : 1,
                area: ['700px','370px'],
                btn:['关闭'],
                btnAlign: 'c',
                content: $('#qft_userInfoBox')
            });
        });
        //添加用户
        $('.subTopLeft').on('click','.qft_adduser',function(){
            layer.open({
                type: 2,
                title: '添加用户',
                skin: 'popup-title-bg', //样式类名
                closeBtn : 1,
                area: ['700px','600px'],
                //btn:['保存','关闭'],
                yes: function(){
                    $('#roleForm').submit();
                },
                btnAlign: 'c',
                content: 'qft_adduser.html'
            });
        });
        //编辑用户
        $('.wareList').on('click','.JS_userEdit',function(){
            layer.open({
                type: 2,
                title: '添加用户',
                skin: 'popup-title-bg', //样式类名
                closeBtn : 1,
                area: ['700px','600px'],
                //btn:['保存','关闭'],
                yes: function(){
                    $('#roleForm').submit();
                },
                btnAlign: 'c',
                content: 'qft_adduser.html'
            });
        });
        //权限修改
        $('.wareList').on('click','.JS_poweralter',function(){
            layer.open({
                type: 2,
                title: '添加职位',
                skin: 'popup-title-bg', //样式类名
                closeBtn : 1,
                area: ['900px','595px'],
                btnAlign: 'c',
                content: 'modifypower.html'
            });
        });
        //表单验证
        $("#roleForm").validationEngine({
            addPromptClass: 'formError-text',
            showArrow: false,
            promptPosition: 'bottomLeft:5 0'
        });
        //修改密码
        $('.wareList').on('click','.modifyPass',function(){
            layer.open({
                type: 1,
                title: '修改密码',
                skin: 'popup-title-bg', //样式类名
                closeBtn : 1,
                area: ['460px','402px'],
                btn:['确认密码'],
                yes: function(){
                    $('#roleForm').submit();
                },
                btnAlign: 'c',
                content: $('#qft_modifyBox')
            });
        });
        //删除
        $('.wareList').on('click','.JS_delete',function(){
            layer.confirm('是否确定删除？',{
                title: '信息确认',
                skin: 'popup-title-bg', //样式类名
                icon: 3,
                btnAlign: 'c',
                area: ['350px','170px'],
                closeBtn : 0
            });
        });
        //开通关闭状态变色
        $('.wareList').on('change','.tab_select',function(){
            var valTxt = $(this).children('option:selected').val();
            if(valTxt == '0'){
                $(this).addClass('errorCol');
            }else{
                $(this).removeClass('errorCol');
            }
        });
        //操作记录
        $('.wareList').on('click','.JS_record',function(){
            layer.open({
                type: 2,
                title: '操作记录',
                skin: 'popup-title-bg', //样式类名
                closeBtn : 1,
                area: ['860px','460px'],
                //btn:['关闭'],
                btnAlign: 'c',
                content: 'qft_recordList.html'
            });
        });
        //datatable
        $('#example').DataTable({
            "bServerSide": true,
            "sPaginationType": "full_numbers",
            //"bJQueryUI": true,
            "sDom": '<"">t<"F"ip>',
            "autoWidth": false,  //自适应宽度
            //"sAjaxSource": "${ctx}/api/user/list", //ajax调用接口
            //<div class="btn-group" style="text-align:left;"><button type="button" class="btn btn-info dropdown-toggle"data-toggle="dropdown">操作 <span class="caret"></span></button>
            "sAjaxSource": "data/userlist.txt", //ajax调用接口
            "aoColumnDefs": [{sDefaultContent: '', orderable: false, aTargets: ['_all']}],
            "aoColumns": [
                {"sTitle": "用户姓名", "mData": "id"},
                {"sTitle": "用户账号", "mData": "id1"},
                {"sTitle": "联系方式", "mData": "id2"},
                {"sTitle": "可看房源城市", "mData": "id3"},
                {"sTitle": "可看房源店面", "mData": "id4"},
                {"sTitle": "可看房源分组", "mData": "id5"},
                {"sTitle": "工作城市", "mData": "id6"},
                {"sTitle": "所属部门", "mData": "id7"},
                {"sTitle": "所属职位", "mData": "id8"},
                {"sTitle": "创建时间", "mData": "id10"},
                {"sTitle": "操作记录", "mData": "id11", "mRender": function(){
                        return '<a class="wareListClick JS_record" href="javascript:void(0);">点击查看</a>';
                    }
                },
                {"sWidth": "90px", "sTitle": "状态", "mData": "id1", "mRender" : function ( data, type, full ) {
                        return '<select class="tab_select" name="" id=""><option value="1">开通</option><option value="0">关闭</option></select>'
                    }
                },
                {"sWidth": "300px", "sTitle" : "基本操作","mData" : "id","sClass":"tab_operate", "mRender" : function ( data, type, full ) {
                        var text = '<a class="operateBtn JS_poweralter" href="javascript:void(0);">权限修改</a>&nbsp;&nbsp;|&nbsp;&nbsp;';
                        text += '<a class="operateBtn JS_userEdit" href="javascript:void(0);">用户编辑</a>&nbsp;&nbsp;|&nbsp;&nbsp;';
                        text += '<a class="operateBtn deleteCol JS_delete" href="javascript:void(0);">删除</a>&nbsp;&nbsp;|&nbsp;&nbsp;';
                        text += '<a class="operateBtn modifyPass" href="javascript:void(0);">修改密码</a>';
                        return text;
                    }
                }
            ],
            "oLanguage": {
                "sProcessing": "数据加载中······",
                "sLengthMenu": "显示 _MENU_ 条记录",
                "sZeroRecords": "没有您要搜索的内容！",
                "sEmptyTable": "列表中无数据存在！",
                "sInfo": "当前显示 _START_ 到 _END_ 条数据，共 _TOTAL_ 条数据",
                "sInfoEmpty": "显示 0 到 0 条记录",
                "sInfoFiltered": "数据列表中共  _MAX_ 条记录",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "上一页",
                    "sNext": "下一页",
                    "sLast": "末页"
                }
            }
            /*"fnServerData" : function ( sSource, aoData, fnCallback, oSettings ) {
               oSettings.jqXHR = $.ajax( {
                   "dataType" 	: 'json',
                   "type" 		: "GET",
                   "async"     : 'false',
                   "url" 		: sSource,
                   "data" 		: {
                       'pageNum': (aoData[3].value/aoData[4].value)+1,
                       'pageSize' :  aoData[4].value,
                       'telphone'  :  $("#telphone").val(),
                       'isable' : $('#isable').val()
                   },
                   "success"	: fnCallback
               } );
           }*/
        });
    })
</script>
</body>
</html>
